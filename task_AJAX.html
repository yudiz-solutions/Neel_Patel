<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0 " />
  <title>AJAX_TASK</title>
  <style>
    table,
    th,
    td {
      border: 1px solid;
    }
  </style>
</head>

<body>
  <form id="addForm" method="post">
    <input type="hidden" id="userId" name="userId" value="1" />
    Title: <input type="text" id="title" name="title" />
    Body:<input type="text" id="body" name="body" />
    <input type="submit" value="Add Data" />
    <br /><br />
  </form>
  <table id="display">
    <tr>
      <th>UserId</th>
      <th>ID</th>
      <th>Title</th>
      <th>Body</th>
      <th>Action</th>
    </tr>
  </table>

  <script>
    function dltrow(id) {
      $(`#${id}`).remove();
    };

    $.ajax({
      url: "https://jsonplaceholder.typicode.com/posts",
      dataType: "json",
      success: function (data) {

        var row = "";

        $.each(data, function (i, post) {

          row +=
            `<tr id="${post.id}"><td>` +
            post.userId +
            "</td><td>" +
            post.id +
            "</td><td>" +
            post.title +
            "</td><td>" +
            post.body +
            "</td><td>" + `<input type="submit" value="Delete" onclick='dltrow(${post.id})'/> <input type="submit" id="edit"  value="Edit" />` + "</td></tr>";
        },

        );
        $("#display").append(row);
      },
      error: function (textStatus, errorThrown) {
        alert("Error:" + textStatus + "-" + errorThrown);
      },
    });

    $("#addForm").submit(function (event) {
      event.preventDefault();

      let formData = $("#addForm").serialize();
      console.log(formData);
      $.ajax({
        type: "POST",
        url: "https://jsonplaceholder.typicode.com/posts",
        data: formData,
        dataType: "json",
        success: function (formRow) {
          var newRow =
            `<tr id="${formRow.id}"><td>` +
            formRow.userId +
            "</td><td>" +
            formRow.id +
            "</td><td>" +
            formRow.title +
            "</td><td>" +
            formRow.body +
            "</td><td>" +
            `<input type="submit" value="Delete" onclick='dltrow(${formRow.id})'/> <input type="submit" id="edit"  value="Edit" />` +
            "</td></tr>";
          $("#display").append(newRow);
          $("#addForm")[0].reset();
        },

        error: function (textStatus, errorThrown) {
          alert("Error:" + textStatus + "-" + errorThrown);
        },
      });
    });

  </script>
  <script>


  </script>
</body>

</html>