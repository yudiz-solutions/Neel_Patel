<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0 " />
  <title>AJAX_TASK</title>
  <style>
    table,
    th,
    td {
      border: 1px solid;
    }
  </style>
</head>

<body>
  <form id="form" method="post">
    <input type="hidden" id="userId" name="userId" value="1" />
    Title: <input type="text" id="title" name="title" />
    Body:<input type="text" id="body" name="body" />
    <input type="submit" value="Add Data" />
    <br /><br />
  </form>
  <table id="display">
    <tr>
      <th>UserId</th>
      <th>ID</th>
      <th>Title</th>
      <th>Body</th>
    </tr>
  </table>
  <script>
    $.ajax({
      url: "https://jsonplaceholder.typicode.com/posts",
      dataType: "json",
      success: function (data) {
        var row = "";

        $.each(data, function (i, post) {

          row +=
            "<tr><td>" +
            post.userId +
            "</td><td>" +
            post.id +
            "</td><td>" +
            post.title +
            "</td><td>" +
            post.body +
            "</td><tr>";
        });

        $("#display").append(row);
      },
      error: function (textStatus, errorThrown) {
        alert("Error:" + textStatus + "-" + errorThrown);
      },
    });

    $("#form").submit(function (event) {
      event.preventDefault();

      let formData = $("#form").serialize();
      // console.log(formData);
      $.ajax({
        type: "POST",
        url: "https://jsonplaceholder.typicode.com/posts",
        data: formData,
        dataType: "json",
        success: function (data) {
          let row =
            "<tr><td>" +
            data.userId +
            "</td><td>" +
            data.id +
            "</td><td>" +
            data.title +
            "</td><td>" +
            data.body +
            "</td><tr>";

          $("#display").append(row);

          $("#form")[0].reset();
        },
        error: function (textStatus, errorThrown) {
          alert("Error:" + textStatus + "- " + errorThrown);
        },
      });
    });
  </script>
</body>

</html>